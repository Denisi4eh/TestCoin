                            },
                            classes: ['alert-danger']
                        }
                    }
                });
                Asset.createElement('cardName', 'nameoncard', {
                    placeholder: 'Name on card',
                    styles: {
                        base: {
                            styles: {
                                'color': 'black',
                                'width': '100%',
                                'border-color': 'cccccc',
                            },
                            classes: ['form-control', 'form-control-lg']
                        },
                        error: {
                            styles: {
                                'border-color': 'red',
                            },
                            classes: ['alert-danger']
                        }
                    }
                });
            });
            Asset.addEventListener('change', function (e) {
                if (e.detail.error) {
                    var text = getErrorMessage(e.detail.errorType);
                    document.getElementById("error_" + e.detail.type).innerText = text;
                } else {
                    document.getElementById("error_" + e.detail.type).innerText = '';
                }
            });
            Asset.addEventListener('submit', function (e) {
                if (e.detail) {
                    if (e.detail.validationError) {
                        document.getElementById("processing").style.display = "none";
                        document.getElementById("carddetails").style.display = "block";
                        for (var type in e.detail.typesError) {
                            var text = getErrorMessage(e.detail.responseMessage);
                            document.getElementById("error_" + type).innerText = text;
                        }
                    } else if (e.detail.errorCode == 0) {
                        if (e.detail.htmlIframeForm) {
                            // var e = document.createElement('div');
                            // e.innerHTML = e.detail.htmlIframeForm;
                            // document.body.appendChild(e);
                            var form = document.createElement('div');
                            form.innerHTML = e.detail.htmlIframeForm;
                            document.body.appendChild(form);
                            document.forms['AssetPayments_form_submit'].submit();

                        } else if (e.detail.transactionStateCode == 1) {
                            document.getElementById("orderId").innerText = e.detail.transactionId;
                            document.getElementById("processing").style.display = "none";
                            document.getElementById("successmessage").style.display = "block";
                        } else {
                            document.getElementById("orderId").innerText = e.detail.transactionId;
                            document.getElementById("errorMessage").innerText = e.detail.responseMessage;
                            document.getElementById("processing").style.display = "none";
                            document.getElementById("failedmessage").style.display = "block";
                        }
                    } else {
                        document.getElementById("errorMessage").innerText = e.detail.errorCode == null ? e.detail.responseMessage : e.detail.errorCode;
                        document.getElementById("orderId").innerText = e.detail.transactionId;
                        document.getElementById("processing").style.display = "none";
                        document.getElementById("failedmessage").style.display = "block";
                    }
                }
            });
            function getErrorMessage(errorType) {
                var text = 'This field can not be empty';
                if (errorType == 'card') { // errorType ['empty', 'card', 'expiry', 'cvv']
                    text = 'Please enter a valid credit card number';
                } else if (errorType == 'expiry') {
                    text = 'Please enter a valid expiration date';
                } else if (errorType == 'cvv') {
                    text = 'Please enter a valid CVV';
                }
                return text;
            };

            var form = document.getElementById('paymentform');
            form.addEventListener("submit", myFunction);
        }

        function myFunction(e) {
            e.preventDefault();
            Asset.createPayment();
            document.getElementById("carddetails").style.display = "none";
            document.getElementById("processing").style.display = "block";
        };
    </script>
</body>
</html>